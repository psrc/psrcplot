---
title: "Interactive plotting"
description:  Learn how to make an interactive plot with psrpllot.
output: html_vignette
vignette: >
  %\VignetteIndexEntry{Interactive plotting}
  %\VignetteEngine{knitr::rmarkdown}
  %\VignetteEncoding{UTF-8}
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE)
library(ggplot2)
library(psrcplot)
library(dplyr)
```

## Install PSRC Fonts

The PSRC Poppins font needs to be installed when you first start creating charts because it is not built into R.

The following function will install PSRC fonts.

```{r}
install_psrc_fonts()
```


The function names in PSRC plot have a naming convention that first identifies whether the plot is static or interactive, then what type of chart. For example, static_bar_chart() makes a static chart that has horizontal bars.

## Make an interactive column chart of travel survey data

If you want to create an interactive column plot, you call the function interactive_column_chart specifying t as the underlying table. Note that in a column chart the x variable is expected to be categories, and the y variable is canumeric- since x values are the categories and the numeric values are represented on the y axis.

In the example below, we have read in an example data table that shows transit access modes from the travel survey:

```{r mode_data, message=FALSE}
transit_acc_df<- read.csv(system.file('extdata', 'transit_access.csv', package='psrcplot')) 

transit_acc_df
```

This data table is sent into a interactive column chart with PSRC colors in the following function:
```{r transit_chart, message=FALSE}
# Interactive chart        
transit_access_chart<-interactive_column_chart(t=transit_acc_df, 
                                               x='mode_acc_walk', y='share', fill='year', 
                                               moe='share_moe', est='percent',
                                               color="psrc_light", title='Transit Access Mode')
transit_access_chart
```
You can find out more about any of the functions by running ?function_name in the package. For example, ?interactive_column_chart()

## Exporting an interactive html chart

Here is how you can save the interactive bar chart you created above programmatically using the htmlwidgets library. Once you have an html version of the file it can be embedded in any webpage.
```{r}
library(htmlwidgets)
saveWidget(transit_access_chart, 
           file=('transit_access.html'))

```

## Changing chart colors
In psrcplot, we provide many color ramps that have been approved by our graphics department. These color ramps can be used by referencing their names as in color="pgnobgy_5" above. You can see the colors in R with the following function: print_psrc_palette(). 
```{r}
print_psrc_palette()
```


