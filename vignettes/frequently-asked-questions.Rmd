---
title: "psrcplot Frequently Asked Questions"
description:  FAQs for doing tricky tasks
output: html_vignette
vignette: >
  %\VignetteIndexEntry{psrcplot Frequently Asked Questions}
  %\VignetteEngine{knitr::rmarkdown}
  %\VignetteEncoding{UTF-8}
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE)
library(ggplot2)
library(psrcplot)
library(dplyr)
library(psrccensus)
library(forcats)
```

### Why am I getting a warning about not having fonts installed?

The PSRC Poppins font needs to be installed when you first start creating charts because it is not built into R.

The following function will install PSRC fonts.

```{r}
install_psrc_fonts()
```


The function names in PSRC plot have a naming convention that first identifies whether the plot is static or interactive, then what type of chart. For example, static_bar_chart() makes a static chart that has horizontal bars.

### How can I change the order of categories on a chart?

The psrcplot package will default to an ordering of categories that may not be the best for the story you are trying to tell.

For example, the following code displays a chart that has Household race by household income but in an undesirable order.

```{r category_order_change, message=FALSE}
z_2019<- get_psrc_pums(span=5,
                       dyear=2019,
                       level='h',
                       vars = c("HRACE", "HINCP"))

dt2019_2<- psrc_pums_median(z_2019, stat_var= "HINCP",
                            group_vars="HRACE")

var19_allrace_total<- dt2019_2%>%
  mutate(date=as.character(2019))%>%
  filter(HRACE !="Total")

income.chart <-interactive_bar_chart(t=var19_allrace_total, 
                                     x = "HINCP_median", y="HRACE",
                                     f="date",
                                     moe='HINCP_median_moe',
                                     color= 'psrc_light',
                                     est='currency',
                                     title= "Regional Household Median Income by Race, weird order")

income.chart
```

If you want to reverse the order of the categorical variables, for example, HRACE- you can use the function fct_rev from the forcats package.  To use fct_rev, you need to make sure your variable is a factor first.


```{r transit_chart, message=FALSE}
# Interactive chart
var19_allrace_total_rev<-var19_allrace_total%>%mutate(HRACE_REV=fct_rev(as.factor(HRACE)))


income.chart.rev <-interactive_bar_chart(t=var19_allrace_total_rev, 
                                     x = "HINCP_median", y="HRACE_REV",
                                     f="date",
                                     moe='HINCP_median_moe',
                                     color= 'psrc_dark',
                                     est='currency',
                                     title= "Regional Household Median Income by Race, better order")

income.chart.rev
```


Sometimes you may wish to order the bars by lowest to highest or highest to lowest.
```{r}
var19_low_high<-var19_allrace_total%>%mutate(HRACE_low_high=fct_reorder(HRACE, -HINCP_median))


income.chart.rev <-interactive_bar_chart(t=var19_low_high, 
                                     x = "HINCP_median", y="HRACE_low_high",
                                     f="date",
                                     moe='HINCP_median_moe',
                                     color= 'psrc_dark',
                                     est='currency',
                                     title= "Regional Household Median Income by Race, better order")

income.chart.rev

```
## When I'm making a horizontal bar chart, what should I set as my x-variable and what should I set as my y-variable? It's kind of confusing because it's unclear whther you should think of this as a column chart rotated, or see the axes as is.

The x-variable should be your numeric variable, and your y-variable should be categorical in the example above. Think of them as the actual location of the variable, not the rotated location of a column chart.

