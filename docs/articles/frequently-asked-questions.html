<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta name="description" content="FAQs for doing tricky tasks">
<title>psrcplot Frequently Asked Questions • psrcplot</title>
<script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="../deps/bootstrap-5.2.2/bootstrap.min.css" rel="stylesheet">
<script src="../deps/bootstrap-5.2.2/bootstrap.bundle.min.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- bootstrap-toc --><script src="https://cdn.rawgit.com/afeld/bootstrap-toc/v1.0.1/dist/bootstrap-toc.min.js"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- search --><script src="https://cdnjs.cloudflare.com/ajax/libs/fuse.js/6.4.6/fuse.js" integrity="sha512-zv6Ywkjyktsohkbp9bb45V6tEMoWhzFzXis+LrMehmJZZSys19Yxf1dopHx7WzIKxr5tK2dVcYmaCk2uqdjF4A==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/autocomplete.js/0.38.0/autocomplete.jquery.min.js" integrity="sha512-GU9ayf+66Xx2TmpxqJpliWbT5PiGYxpaG8rfnBEk1LL8l1KGkRShhngwdXK1UgqhAzWpZHSiYPc09/NwDQIGyg==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/mark.min.js" integrity="sha512-5CYOlHXGh6QpOFA/TeTylKLWfB3ftPsde7AnmhuitiTX4K5SqCLBeKro6sPS8ilsz1Q4NRx3v8Ko2IBiszzdww==" crossorigin="anonymous"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="psrcplot Frequently Asked Questions">
<meta property="og:description" content="FAQs for doing tricky tasks">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>
    

    <nav class="navbar fixed-top navbar-light navbar-expand-lg bg-light"><div class="container">
    
    <a class="navbar-brand me-2" href="../index.html">psrcplot</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.1.0</small>

    
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="nav-item">
  <a class="nav-link" href="../reference/index.html">Reference</a>
</li>
<li class="active nav-item dropdown">
  <a href="#" class="nav-link dropdown-toggle" data-bs-toggle="dropdown" role="button" aria-expanded="false" aria-haspopup="true" id="dropdown-articles">Articles</a>
  <div class="dropdown-menu" aria-labelledby="dropdown-articles">
    <a class="dropdown-item" href="../articles/frequently-asked-questions.html">psrcplot Frequently Asked Questions</a>
    <a class="dropdown-item" href="../articles/make-plots-interactive.html">Interactive plotting</a>
    <a class="dropdown-item" href="../articles/make-plots.html">Get Started Making a Static Plot</a>
  </div>
</li>
      </ul>
<form class="form-inline my-2 my-lg-0" role="search">
        <input type="search" class="form-control me-sm-2" aria-label="Toggle navigation" name="search-input" data-search-index="../search.json" id="search-input" placeholder="Search for" autocomplete="off">
</form>

      <ul class="navbar-nav"></ul>
</div>

    
  </div>
</nav><div class="container template-article">




<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="" class="logo" alt=""><h1>psrcplot Frequently Asked Questions</h1>
            
      
      
      <div class="d-none name"><code>frequently-asked-questions.Rmd</code></div>
    </div>

    
    
<div class="section level3">
<h3 id="category-display-order">Category display order<a class="anchor" aria-label="anchor" href="#category-display-order"></a>
</h3>
<p>This is best done prior to invoking the <strong>psrcplot</strong>
function by converting the variable to a Factor datatype with levels
specified in the sequence you’d like them displayed.</p>
<p>In the case below, the HRACE variable arrives as a Factor datatype,
but still with alphabetical default ordering.</p>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://magrittr.tidyverse.org" class="external-link">magrittr</a></span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://psrc.github.io/psrccensus/" class="external-link">psrccensus</a></span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://dplyr.tidyverse.org" class="external-link">dplyr</a></span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://psrc.github.io/psrcplot/">psrcplot</a></span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Retrieve, summarize and filter Census PUMS data</span></span>
<span>  <span class="va">z_2019</span><span class="op">&lt;-</span> <span class="fu"><a href="https://psrc.github.io/psrccensus/reference/get_psrc_pums.html" class="external-link">get_psrc_pums</a></span><span class="op">(</span>span<span class="op">=</span><span class="fl">5</span>,</span>
<span>                         dyear<span class="op">=</span><span class="fl">2019</span>,</span>
<span>                         level<span class="op">=</span><span class="st">'h'</span>,</span>
<span>                         vars<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"HRACE"</span>, <span class="st">"HINCP"</span><span class="op">)</span><span class="op">)</span></span>
<span>  </span>
<span>  <span class="va">hhinc19_x_race</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://psrc.github.io/psrccensus/reference/pums_stat.html" class="external-link">psrc_pums_median</a></span><span class="op">(</span></span>
<span>                          <span class="va">z_2019</span>, </span>
<span>                          stat_var<span class="op">=</span><span class="st">"HINCP"</span>,</span>
<span>                          group_vars<span class="op">=</span><span class="st">"HRACE"</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>    <span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html" class="external-link">filter</a></span><span class="op">(</span><span class="va">HRACE</span> <span class="op">!=</span><span class="st">"Total"</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span> <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html" class="external-link">mutate</a></span><span class="op">(</span>DATE<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/character.html" class="external-link">as.character</a></span><span class="op">(</span><span class="va">DATA_YEAR</span><span class="op">)</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Create chart -- default category ordering   </span></span>
<span><span class="va">income.chart.default</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/static_bar_chart.html">static_bar_chart</a></span><span class="op">(</span></span>
<span>     t<span class="op">=</span><span class="va">hhinc19_x_race</span>,</span>
<span>     x<span class="op">=</span><span class="st">"HINCP_median"</span>, y<span class="op">=</span><span class="st">"HRACE"</span>,</span>
<span>     fill<span class="op">=</span><span class="st">"DATE"</span>,</span>
<span>     moe<span class="op">=</span><span class="st">'HINCP_median_moe'</span>,</span>
<span>     est<span class="op">=</span><span class="st">'currency'</span>,</span>
<span>     title<span class="op">=</span><span class="st">"Median Household Income by Race - default Race order"</span><span class="op">)</span></span>
<span></span>
<span><span class="va">income.chart.default</span></span></code></pre></div>
<p><img src="frequently-asked-questions_files/figure-html/default_ordering-1.png" width="700"></p>
<p>Factor levels can be reversed using the <code>fct_rev()</code>
function from the <strong>forcats</strong> package.</p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">hhinc19_rev</span> <span class="op">&lt;-</span> <span class="va">hhinc19_x_race</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span> </span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html" class="external-link">mutate</a></span><span class="op">(</span>HRACE_REV<span class="op">=</span><span class="fu">forcats</span><span class="fu">::</span><span class="fu"><a href="https://forcats.tidyverse.org/reference/fct_rev.html" class="external-link">fct_rev</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/factor.html" class="external-link">as.factor</a></span><span class="op">(</span><span class="va">HRACE</span><span class="op">)</span><span class="op">)</span><span class="op">)</span></span>
<span></span>
<span><span class="va">income.chart.reverse</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/static_bar_chart.html">static_bar_chart</a></span><span class="op">(</span></span>
<span>     t<span class="op">=</span><span class="va">hhinc19_rev</span>, </span>
<span>     x<span class="op">=</span><span class="st">"HINCP_median"</span>, y<span class="op">=</span><span class="st">"HRACE_REV"</span>,</span>
<span>     f<span class="op">=</span><span class="st">"DATE"</span>,</span>
<span>     moe<span class="op">=</span><span class="st">'HINCP_median_moe'</span>,</span>
<span>     est<span class="op">=</span><span class="st">'currency'</span>,</span>
<span>     title<span class="op">=</span><span class="st">"Median Household Income by Race - reverse default"</span><span class="op">)</span></span>
<span></span>
<span><span class="va">income.chart.reverse</span></span></code></pre></div>
<p><img src="frequently-asked-questions_files/figure-html/reverse_ordering-1.png" width="700"></p>
</div>
<div class="section level2">
<h2 id="sort-by-value">Sort by value<a class="anchor" aria-label="anchor" href="#sort-by-value"></a>
</h2>
<p>You may wish to order the categories by the data variable instead.
This uses another <strong>forcats</strong> function,
<code>fct_reorder()</code> (more complex multi-variable ordering
expressions are also possible using this function).</p>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span> <span class="va">hhinc19_low_high</span> <span class="op">&lt;-</span> <span class="va">hhinc19_x_race</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span> </span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html" class="external-link">mutate</a></span><span class="op">(</span>HRACE_low_high<span class="op">=</span><span class="fu">forcats</span><span class="fu">::</span><span class="fu"><a href="https://forcats.tidyverse.org/reference/fct_reorder.html" class="external-link">fct_reorder</a></span><span class="op">(</span><span class="va">HRACE</span>, <span class="op">-</span><span class="va">HINCP_median</span><span class="op">)</span><span class="op">)</span></span>
<span></span>
<span><span class="va">income.chart.low_high</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/static_bar_chart.html">static_bar_chart</a></span><span class="op">(</span></span>
<span>      t<span class="op">=</span><span class="va">hhinc19_low_high</span>, </span>
<span>      x<span class="op">=</span><span class="st">"HINCP_median"</span>, y<span class="op">=</span><span class="st">"HRACE_low_high"</span>,</span>
<span>      fill<span class="op">=</span><span class="st">"DATE"</span>,</span>
<span>      moe<span class="op">=</span><span class="st">'HINCP_median_moe'</span>,</span>
<span>      color<span class="op">=</span><span class="st">'psrc_dark'</span>,</span>
<span>      est<span class="op">=</span><span class="st">'currency'</span>,</span>
<span>      title<span class="op">=</span><span class="st">"Median Household Income by Race - median income order"</span><span class="op">)</span></span>
<span></span>
<span><span class="va">income.chart.low_high</span></span></code></pre></div>
<p><img src="frequently-asked-questions_files/figure-html/data_ordering-1.png" width="700"></p>
</div>
<div class="section level2">
<h2 id="put-in-some-other-used-specified-order">Put in some other used specified order<a class="anchor" aria-label="anchor" href="#put-in-some-other-used-specified-order"></a>
</h2>
<p>Sometimes there is an logic that can’t be captured by alphabetical or
numeric rank–for example, setting remainder or combination categories
last. To do that, you’ll need to order the factor levels manually. Be
careful that you type the exact factor names, or they will be omitted
(ugh).</p>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">hhinc19_custom</span> <span class="op">&lt;-</span> <span class="va">hhinc19_x_race</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>    <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html" class="external-link">mutate</a></span><span class="op">(</span>HRACE_custom<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/factor.html" class="external-link">factor</a></span><span class="op">(</span><span class="va">HRACE</span>, </span>
<span>       levels <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"American Indian or Alaskan Native Alone"</span>, </span>
<span>                  <span class="st">"Asian alone"</span>,</span>
<span>                  <span class="st">"Black or African American alone"</span>,</span>
<span>                  <span class="st">"Hispanic or Latino"</span>,</span>
<span>                  <span class="st">"Native Hawaiian and Other Pacific Islander alone"</span>,</span>
<span>                  <span class="st">"White alone"</span>,</span>
<span>                  <span class="st">"Some Other Race alone"</span>,</span>
<span>                  <span class="st">"Two or More Races"</span>, </span>
<span>                  <span class="st">"Multiple Races"</span><span class="op">)</span><span class="op">)</span><span class="op">)</span></span>
<span></span>
<span><span class="va">income.chart.custom</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/static_bar_chart.html">static_bar_chart</a></span><span class="op">(</span></span>
<span>      t<span class="op">=</span><span class="va">hhinc19_custom</span>, </span>
<span>      x<span class="op">=</span><span class="st">"HINCP_median"</span>, </span>
<span>      y<span class="op">=</span><span class="st">"HRACE_custom"</span>,</span>
<span>      fill<span class="op">=</span><span class="st">"DATE"</span>,</span>
<span>      moe<span class="op">=</span><span class="st">'HINCP_median_moe'</span>,</span>
<span>      color<span class="op">=</span><span class="st">'psrc_dark'</span>,</span>
<span>      est<span class="op">=</span><span class="st">'currency'</span>,</span>
<span>      title<span class="op">=</span> <span class="st">"Regional Household Median Income by Race - custom order"</span><span class="op">)</span></span>
<span></span>
<span><span class="va">income.chart.custom</span></span></code></pre></div>
<p><img src="frequently-asked-questions_files/figure-html/custom_ordering-1.png" width="700"></p>
<div class="section level3">
<h3 id="how-can-i-wrap-the-text-on-a-column-chart-x-axis--its-looking-messy">How can I wrap the text on a column chart x axis- it’s looking
messy!<a class="anchor" aria-label="anchor" href="#how-can-i-wrap-the-text-on-a-column-chart-x-axis--its-looking-messy"></a>
</h3>
<p>It does look messy when you don’t wrap the text on the x-axis often
on a column chart - like this:</p>
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">income.column.messy</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/static_column_chart.html">static_column_chart</a></span><span class="op">(</span></span>
<span>      t<span class="op">=</span><span class="va">hhinc19_custom</span>, </span>
<span>      x<span class="op">=</span><span class="st">"HRACE"</span>, </span>
<span>      y<span class="op">=</span><span class="st">"HINCP_median"</span>,</span>
<span>      fill<span class="op">=</span><span class="st">"DATE"</span>,</span>
<span>      moe<span class="op">=</span><span class="st">'HINCP_median_moe'</span>,</span>
<span>      est<span class="op">=</span><span class="st">'currency'</span>,</span>
<span>      title<span class="op">=</span> <span class="st">"Regional Household Median Income by Race, lookin messy"</span><span class="op">)</span></span>
<span></span>
<span><span class="va">income.column.messy</span></span></code></pre></div>
<p><img src="frequently-asked-questions_files/figure-html/messy_labels-1.png" width="700"></p>
<p>We can fix these ugly labels by string-wrapping the text to use in
the <code>xlabel</code> parameter. We recommend creating a separate
variable for this, as the string wrapping loses any unique factor level
ordering as described above. Prior to using the function.You might need
to play around with the <code><a href="https://stringr.tidyverse.org/reference/str_wrap.html" class="external-link">str_wrap()</a></code> parameter to get the
breaks looking nice.</p>
<div class="sourceCode" id="cb6"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">hhinc19_wrap</span> <span class="op">&lt;-</span> <span class="va">hhinc19_custom</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span> </span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html" class="external-link">mutate</a></span><span class="op">(</span>HRACE_wrap<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/factor.html" class="external-link">factor</a></span><span class="op">(</span><span class="fu">stringr</span><span class="fu">::</span><span class="fu"><a href="https://stringr.tidyverse.org/reference/str_wrap.html" class="external-link">str_wrap</a></span><span class="op">(</span><span class="va">HRACE</span>, <span class="fl">10</span><span class="op">)</span><span class="op">)</span><span class="op">)</span></span>
<span></span>
<span><span class="va">income.column.wrapped</span> <span class="op">&lt;-</span><span class="fu"><a href="../reference/static_column_chart.html">static_column_chart</a></span><span class="op">(</span></span>
<span>      t<span class="op">=</span><span class="va">hhinc19_wrap</span>, </span>
<span>      x<span class="op">=</span><span class="st">"HRACE_custom"</span>, y<span class="op">=</span><span class="st">"HINCP_median"</span>,</span>
<span>      f<span class="op">=</span><span class="st">"DATE"</span>,</span>
<span>      moe<span class="op">=</span><span class="st">'HINCP_median_moe'</span>,</span>
<span>      est<span class="op">=</span><span class="st">'currency'</span>,</span>
<span>      xlabel<span class="op">=</span><span class="st">"HRACE_wrap"</span>,</span>
<span>      title<span class="op">=</span> <span class="st">"Regional Household Median Income by Race, wrapped x- axis label"</span><span class="op">)</span></span>
<span></span>
<span><span class="va">income.column.wrapped</span></span></code></pre></div>
<p><img src="frequently-asked-questions_files/figure-html/wrapped_labels-1.png" width="700"></p>
</div>
</div>
<div class="section level2">
<h2 id="x-y-axes-for-bar-charts-vs--column-charts">X &amp; Y axes for bar charts vs. column charts<a class="anchor" aria-label="anchor" href="#x-y-axes-for-bar-charts-vs--column-charts"></a>
</h2>
<p>Bars are horizontal and columns are vertical. For a column chart, the
numeric value should be assigned the y-axis, but for a bar chart, the
numeric value should be assigned to the x-axis, as displayed.</p>
</div>
  </main><aside class="col-md-3"><nav id="toc"><h2>On this page</h2>
    </nav></aside>
</div>



    <footer><div class="pkgdown-footer-left">
  <p></p>
<p>Developed by Craig Helmann, Christy Lam, Megan Gryzbowski, Suzanne Childress, Michael Jensen.</p>
</div>

<div class="pkgdown-footer-right">
  <p></p>
<p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.6.</p>
</div>

    </footer>
</div>

  

  

  </body>
</html>
